    - name: Install MetaTrader 5
      shell: pwsh
      run: |
        $url  = 'https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/mt5setup.exe'
        $dest = "$env:TEMP\mt5setup.exe"
        $ok   = $false
        1..3 | ForEach-Object {
          try {
            Write-Host "â–¼ attempt $_ : downloading $url"
            Invoke-WebRequest $url -OutFile $dest -UseBasicParsing -Headers @{ "User-Agent" = "Mozilla/5.0" }
            $ok = $true
            break
          } catch {
            Write-Warning "download failed (attempt $_)."
            Start-Sleep -Seconds 10
          }
        }
        if (-not $ok) { throw "MT5 setup download failed after 3 attempts" }

        Start-Process -FilePath $dest -ArgumentList '/silent', '/dir=C:\MT5' -Wait
        echo "C:\MT5" >> $env:GITHUB_PATH
